# AICG平台 - 生产环境配置
# 复制此文件为 .env.production 并修改相应配置

# =============================================================================
# 应用基础配置
# =============================================================================
ENVIRONMENT=production
DEBUG=false
API_V1_PREFIX=/api/v1

# =============================================================================
# CORS和安全配置
# =============================================================================
CORS_ORIGINS=["*"]
ALLOWED_HOSTS=["*"]

# =============================================================================
# 数据库配置
# =============================================================================
DATABASE_URL=postgresql+asyncpg://aicg_user:CHANGE_ME_IN_PRODUCTION@postgres:5432/aicg_platform
DATABASE_POOL_PRE_PING=true
DATABASE_POOL_RECYCLE=3600

# =============================================================================
# Redis和Celery配置
# =============================================================================
REDIS_URL=redis://:CHANGE_ME_IN_PRODUCTION@redis:6379/0
CELERY_BROKER_URL=redis://:CHANGE_ME_IN_PRODUCTION@redis:6379/0
CELERY_RESULT_BACKEND=redis://:CHANGE_ME_IN_PRODUCTION@redis:6379/0

# =============================================================================
# JWT配置
# =============================================================================
# JWT密钥 - 生产环境必须修改为随机字符串
# 生成方法: openssl rand -hex 32
JWT_SECRET_KEY=CHANGE_ME_TO_RANDOM_STRING_IN_PRODUCTION
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=10080  # 7天 (可根据需要调整)

# =============================================================================
# 加密配置
# =============================================================================
# API密钥加密密钥 (用于加密存储在数据库中的API密钥)
# 生成方法: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# 警告: 更改此密钥会导致已存储的API密钥无法解密
API_KEY_ENCRYPTION_KEY=CHANGE_ME_IN_PRODUCTION

# =============================================================================
# 对象存储配置 (支持S3协议)
# =============================================================================
# 注意: 存储配置可以通过管理后台界面配置，无需在此配置
# 以下配置仅作为默认配置使用，如果数据库中有配置则优先使用数据库配置

# 存储类型: minio, s3, aliyun-oss等
STORAGE_TYPE=minio

# MinIO配置示例 (Docker内部服务)
STORAGE_ENDPOINT=minio:9000
STORAGE_PUBLIC_URL=https://your-domain.com  # 外部访问地址，用于生成文件URL
STORAGE_ACCESS_KEY=minioadmin
STORAGE_SECRET_KEY=CHANGE_ME_IN_PRODUCTION
STORAGE_SECURE=false  # 如果使用HTTPS则设为true
STORAGE_BUCKET_NAME=aicg-files
STORAGE_REGION=us-east-1

# AWS S3配置示例 (取消注释以使用)
# STORAGE_TYPE=s3
# STORAGE_ENDPOINT=s3.amazonaws.com
# STORAGE_ACCESS_KEY=your-aws-access-key
# STORAGE_SECRET_KEY=your-aws-secret-key
# STORAGE_SECURE=true
# STORAGE_BUCKET_NAME=your-bucket-name
# STORAGE_REGION=us-east-1

# 阿里云OSS配置示例 (取消注释以使用)
# STORAGE_TYPE=aliyun-oss
# STORAGE_ENDPOINT=oss-cn-hangzhou.aliyuncs.com
# STORAGE_ACCESS_KEY=your-aliyun-access-key
# STORAGE_SECRET_KEY=your-aliyun-secret-key
# STORAGE_SECURE=true
# STORAGE_BUCKET_NAME=your-bucket-name
# STORAGE_REGION=oss-cn-hangzhou

# =============================================================================
# 头像上传配置
# =============================================================================
AVATAR_BUCKET_NAME=aicg-avatars
MAX_AVATAR_SIZE=5242880
ALLOWED_AVATAR_TYPES=["jpg","jpeg","png","webp"]

# =============================================================================
# 日志配置
# =============================================================================
LOG_LEVEL=INFO
STRUCTURED_LOGGING=true
LOG_FILE=
COLORED_LOGS=false

# =============================================================================
# Docker Compose专用变量 (用于docker-compose.prod.yml)
# =============================================================================
POSTGRES_DB=aicg_platform
POSTGRES_USER=aicg_user
POSTGRES_PASSWORD=CHANGE_ME_IN_PRODUCTION
POSTGRES_PORT=5432

REDIS_PASSWORD=CHANGE_ME_IN_PRODUCTION
REDIS_PORT=6379

MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=CHANGE_ME_IN_PRODUCTION
MINIO_BUCKET=aicg-platform
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001

SECRET_KEY=CHANGE_ME_TO_RANDOM_STRING_IN_PRODUCTION

BACKEND_PORT=8000
FRONTEND_PORT=80
